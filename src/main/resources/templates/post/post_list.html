
<html layout:decorate="~{global/usrlayout}">

<a class="btn btn-link" href="/post/list">홈</a>

<html xmlns:layout="http://www.w3.org/1999/xhtml">

<style>
    .grid-container {
        display: grid;
        grid-template-columns: repeat(5, 1fr); /* 5개의 동일한 크기의 컬럼 */
        grid-gap: 10px; /* 각 게시물 사이의 간격 */
    }

    .grid-item {
        border: 1px solid #ddd; /* 경계선 스타일 */
        padding: 5px; /* 내부 패딩 */
        text-align: center; /* 텍스트 가운데 정렬 */
    }

    .grid-item img {
        max-width: 50%; /* 이미지 최대 너비 설정 */
        height: auto; /* 이미지 높이 자동 조절 */
    }

    .grid-item a {
        text-decoration: none; /* 링크 밑줄 제거 */
        color: inherit; /* 링크 색상 상속 */
        display: block; /* 블록 레벨 링크 */
    }
</style>
<body>
    <div>
        <div>
            <div >
                <input type="text" id="search_kw" th:value="${kw}">
                <button type="button" id="btn_search">찾기</button>
            </div>
        </div>
    </div>



<div layout:fragment="content" class="grid-container">

    <th:block th:each="post : ${postList}">

<div class="grid-container">
    <th:block th:each="post : ${paging}">
        <a th:href="@{/post/detail/{id}(id=${post.id})}" class="grid-item">
            <img th:src="@{/images/card-image.png}" alt="Card Image">
            <h5 th:text="${post.title}">게시물 제목</h5>
            <h5 th:text="${post.author.getUsername()}">작성자</h5>
            <h5 th:text="${post.view}">조회수</h5>
        </a>
    </th:block>
</div>


<div th:if="${!paging.isEmpty()}">
    <ul>
        <li th:classappend="${!paging.hasPrevious} ? 'disabled'">
            <a th:href="@{|?page=${paging.number-1}|}">
                <span>이전</span>

    <div class="grid-container">
        <th:block th:each="post : ${paging}">
            <a th:href="@{/post/detail/{id}(id=${post.id})}" class="grid-item">
                <img th:src="@{/images/card-image.png}" alt="Card Image">
                <h5 th:text="${post.title}">게시물 제목</h5>
                <h5 th:text="${post.author.getUsername()}">작성자</h5>
                <h5 th:text="${post.view}">조회수</h5>
            </a>
        </th:block>
    </div>

<a th:href="@{/post/create}">질문 등록하기</a>
    <div th:if="${!paging.isEmpty()}">
        <ul>
            <li th:classappend="${!paging.hasPrevious} ? 'disabled'">
                <a href="javascript:void(0)" th:data-page="${paging.number-1}">
                    <span>이전</span>
                </a>
            </li>
            <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
                th:if="${page >= paging.number-2 and page <= paging.number+2}"
                th:classappend="${page == paging.number} ? 'active'">
                <a th:text="${page+1}" href="javascript:void(0)" th:data-page="${page}"></a>
            </li>
            <li th:classappend="${!paging.hasNext} ? 'disabled'">
                <a href="javascript:void(0)" th:data-page="${paging.number+1}">
                    <span>다음</span>
                </a>
            </li>
        </ul>
    </div>
    <div>
        <a th:href="@{/post/create}">질문 등록하기</a>
    </div>
    <form th:action="@{/post/list}" method="get" id="searchForm">
        <input type="hidden" id="kw" name="kw" th:value="${kw}">
        <input type="hidden" id="page" name="page" th:value="${paging.number}">
    </form>
</body>
<script layout:fragment="script" type='text/javascript'>
    const page_elements = document.getElementsByClassName("page-link");
    Array.from(page_elements).forEach(function(element) {
        element.addEventListener('click', function() {
            document.getElementById('page').value = this.dataset.page;
            document.getElementById('searchForm').submit();
        });
    });
    const btn_search = document.getElementById("btn_search");
    btn_search.addEventListener('click', function() {
        document.getElementById('kw').value = document.getElementById('search_kw').value;
        document.getElementById('page').value = 0;  // 검색버튼을 클릭할 경우 0페이지부터 조회한다.
        document.getElementById('searchForm').submit();
    });
</script>
</html>

